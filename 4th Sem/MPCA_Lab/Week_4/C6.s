; IMPLEMENT THE FOLLOWING OPERATION
; X = MUL(ADD(A, B), C) USE NESTED FUNCTION CALL

.DATA
	A: .WORD 0X05
	B: .WORD 0X06
	C: .WORD 0X07
	D: .WORD 0


.TEXT
	LDR R0, =A
	LDR R1, =B
	LDR R2, =C
	LDR R3, =D

	; ADDRESSES
	LDR R4, [R0]
	LDR R5, [R1]
	LDR R6, [R3]

	STMEA R13!, {R4 - R6}
	BL MULT
	STR R12, [R3]
	SWI 0X011

	MULT:
		LDMEA R13!, {R7 - R9}
		STMEA R13!, {R7, R8, LR} ; LR IS PUSHED TO STACK AS OTHERWISE THE LR REGISTER IS OVERWRITTEN
		BL ADD
		LDMEA R13!, {LR}
		MUL R12, R9, R12
		MOV PC, LR

		ADD:
			LDMEA R13!, {R10, R11, R12}
			STMEA R13!, {R12} ; PUSHING BACK LR TO STACK
			ADD R12, R10, R11
			MOV PC, LR